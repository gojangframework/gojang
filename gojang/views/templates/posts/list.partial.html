{{range .Data.Posts}}
<div class="card post-card" id="post-{{.ID}}">
    <h3>{{.Subject}}</h3>
    <div class="post-meta">
        <span class="author">By: {{if .Edges.Author}}{{.Edges.Author.Email}}{{else}}Unknown{{end}}</span>
        <span class="date">{{.CreatedAt.Format "Jan 2, 2006 at 3:04 PM"}}</span>
    </div>
    <div class="post-body">
        {{.Body}}
    </div>
    {{if $.User}}
    {{if or $.User.IsStaff (eq $.User.ID .Edges.Author.ID)}}
    <div class="post-actions">
        <button 
            hx-get="/posts/{{.ID}}/edit" 
            hx-target="#modal" 
            hx-swap="innerHTML"
            class="btn-sm btn-secondary">
            Edit
        </button>
        <button 
            hx-get="/posts/{{.ID}}/delete"
            hx-target="#modal" 
            hx-swap="innerHTML"
            class="btn-sm btn-danger">
            Delete
        </button>
    </div>
    {{end}}
    {{end}}
</div>
{{else}}
<div class="card">
    <p class="text-center">No posts yet. Be the first to create one!</p>
</div>
{{end}}
